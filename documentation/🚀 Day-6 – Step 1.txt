ğŸš€ Day-6 â€“ Step 1
spring boot-parent version:3.5.11
spring cloud version:2025.0.1
Introduce Kafka Infrastructure (No Code Changes Yet)

Before touching Order or Payment logic, we must introduce the event backbone.

ğŸ¯ Goal of Step-1

âœ” Kafka running locally
âœ” Topics created
âœ” All services able to connect
âœ” No business logic change yet

We are just preparing infrastructure.

ğŸ— Architecture After Step-1
Order Service
Payment Service
Delivery Service (coming soon)
        â†“
      Kafka
ğŸ§± Step 1.1 â€“ Run Kafka Locally (Docker)

Create a file in root project:

docker-compose.yml
version: '3.8'

services:

  zookeeper:
    image: confluentinc/cp-zookeeper:7.5.0
    environment:
      ZOOKEEPER_CLIENT_PORT: 2181
    ports:
      - "2181:2181"

  kafka:
    image: confluentinc/cp-kafka:7.5.0
    depends_on:
      - zookeeper
    ports:
      - "9092:9092"
    environment:
      KAFKA_ZOOKEEPER_CONNECT: zookeeper:2181
      KAFKA_ADVERTISED_LISTENERS: PLAINTEXT://localhost:9092
      KAFKA_OFFSETS_TOPIC_REPLICATION_FACTOR: 1
â–¶ Run it
docker compose up -d

Check:

docker ps

You must see:

kafka

zookeeper

ğŸ§± Step 1.2 â€“ Add Kafka Dependency (Order + Payment)

Add in BOTH services pom.xml:

<dependency>
    <groupId>org.springframework.kafka</groupId>
    <artifactId>spring-kafka</artifactId>
</dependency>
ğŸ§± Step 1.3 â€“ Add Kafka Config (Order + Payment)

In application.yml of both services:

spring:
  kafka:
    bootstrap-servers: localhost:9092

    consumer:
      group-id: foodroute-group
      auto-offset-reset: earliest
      key-deserializer: org.apache.kafka.common.serialization.StringDeserializer
      value-deserializer: org.springframework.kafka.support.serializer.JsonDeserializer
      properties:
        spring.json.trusted.packages: "*"

    producer:
      key-serializer: org.apache.kafka.common.serialization.StringSerializer
      value-serializer: org.springframework.kafka.support.serializer.JsonSerializer
ğŸ§± Step 1.4 â€“ Enable Kafka

In main class of both services:

@EnableKafka
@SpringBootApplication
public class OrderServiceApplication { }

Same for Payment.

ğŸ§ª Step 1.5 â€“ Verify Connectivity

Start:

Eureka

Order Service

Payment Service

If no startup errors â†’ Kafka connected successfully.

You should NOT see:

Failed to connect to localhost:9092
âœ… Step-1 Completion Checklist

âœ” Docker Kafka running
âœ” Dependency added
âœ” Config added
âœ” Services start without Kafka errors