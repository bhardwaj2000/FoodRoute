ğŸ“„ FoodRoute â€“ Order Service Development Requirements (Tech Lead Spec)
1ï¸âƒ£ Objective

Build the Order Service, which acts as the core microservice in the FoodRoute platform.
The service is responsible for order creation, order persistence, and order state management, without integrating payment or delivery in this phase.

2ï¸âƒ£ Technology Stack (MANDATORY)
Layer	Technology
Language	Java 21
Framework	Spring Boot 3.2.x
Architecture	Microservices
API Style	REST
Service Discovery	Eureka Client
Persistence	Spring Data JPA
Database	MySQL
Build Tool	Maven
DTO Style	Java record
Error Modeling	Java sealed interfaces (where applicable)
3ï¸âƒ£ Project Naming & Structure
ğŸ“¦ Service Name
foodroute-order-service

ğŸ“ Package Structure (Required)
com.foodroute.order
 â”œâ”€â”€ controller
 â”œâ”€â”€ service
 â”œâ”€â”€ repository
 â”œâ”€â”€ domain
 â”‚    â”œâ”€â”€ entity
 â”‚    â”œâ”€â”€ enums
 â”‚    â””â”€â”€ error
 â”œâ”€â”€ dto
 â””â”€â”€ config

4ï¸âƒ£ Service Responsibilities
âœ… Must Handle

Create new orders

Persist orders in database

Maintain order lifecycle/state

Fetch order by ID

Register with Eureka

âŒ Must NOT Handle (Out of Scope)

Payment processing

Delivery assignment

Notification

Saga orchestration

5ï¸âƒ£ Order Lifecycle (Business Rule)

Order status must follow this state model:

CREATED â†’ PAYMENT_PENDING â†’ PAID â†’ OUT_FOR_DELIVERY â†’ DELIVERED


Failure states:

CANCELLED


ğŸ‘‰ State transitions must be controlled in service layer.

6ï¸âƒ£ API Contract (Contract-First)
ğŸ”¹ Create Order

Endpoint

POST /orders


Request (record)

{
  "userId": "U123",
  "restaurantId": "R456",
  "items": [
    { "itemId": "I1", "quantity": 2 }
  ]
}


Response

{
  "orderId": "5e5adea3-156a-48c1-bca8-794e5cc02c99",
  "status": "CREATED",
  "totalAmount": 500.00
}

ğŸ”¹ Get Order by ID

Endpoint

GET /orders/{orderId}


Response

{
  "orderId": "5e5adea3-156a-48c1-bca8-794e5cc02c99",
  "status": "CREATED",
  "totalAmount": 500.00
}

7ï¸âƒ£ Data Model (MySQL)
ğŸ—„ï¸ Table: orders
Column	Type	Notes
order_id	CHAR(36)	UUID (readable)
user_id	VARCHAR(50)	
restaurant_id	VARCHAR(50)	
status	VARCHAR(30)	Enum
total_amount	DECIMAL(10,2)	
created_at	TIMESTAMP	

ğŸ“Œ UUID must be stored in readable format (CHAR(36)).

8ï¸âƒ£ Domain Modeling Rules
ğŸ”¹ DTOs

Must use Java record

Immutable

No business logic

ğŸ”¹ Entities

Use standard JPA entities

Mutable (required by ORM)

ğŸ”¹ Errors

Use sealed interfaces for domain-specific errors

Avoid generic RuntimeException where possible

9ï¸âƒ£ Configuration Requirements
application.yml

Service must run on random port

Must register with Eureka

MySQL connection required

JPA auto schema update enabled (for dev)

ğŸ” Service Registration

Service name must be:

foodroute-order-service


Must appear in Eureka dashboard

Must support dynamic port allocation

10ï¸âƒ£ Non-Functional Requirements

Clean layering (Controller â†’ Service â†’ Repository)

No cross-service DB access

No business logic in controllers

Readable logs

API must return proper HTTP status codes

11ï¸âƒ£ Completion Criteria (Definition of Done)

âœ” Service starts successfully
âœ” Registers with Eureka
âœ” MySQL table created
âœ” POST /orders works
âœ” GET /orders/{id} works
âœ” UUID readable in DB
âœ” Code uses Java 21 features correctly

ğŸ§  Architect Note (For Developer)

This service is intentionally kept isolated.
Integration with Payment, Delivery, and Saga will be introduced in later phases.