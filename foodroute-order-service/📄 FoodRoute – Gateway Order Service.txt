ğŸ“„ FoodRoute â€“ Gateway â†’ Order Service Routing
(Development Requirements â€“ Tech Lead Spec)
1ï¸âƒ£ Objective

Enable external clients to access the Order Service exclusively via API Gateway, enforcing:

Centralized routing

Service abstraction

No direct client access to backend services

By the end of Day-3, clients must never call Order Service directly.

2ï¸âƒ£ Scope of Day-3
âœ… In Scope

API Gateway routing to Order Service

Path-based routing rules

Request forwarding & response passthrough

Basic validation of routing via Gateway

Service discoveryâ€“based routing

âŒ Out of Scope

Authentication / Authorization

Rate limiting

Circuit breaker

Payment or Delivery integration

Saga orchestration

(Those come in later days)

3ï¸âƒ£ Technology Stack (Locked)
Layer	Technology
Language	Java 21
Gateway	Spring Cloud Gateway (WebFlux)
Service Discovery	Eureka
Backend Service	foodroute-order-service
API Style	REST
Build Tool	Maven

âš ï¸ No Spring MVC in Gateway (WebFlux only).

4ï¸âƒ£ Architecture Rule (MANDATORY)
Client  â†’  API Gateway  â†’  Order Service


ğŸš« Client â†’ Order Service (direct) NOT ALLOWED

5ï¸âƒ£ Service Naming (Strict)
Component	Name
Gateway	foodroute-gateway
Order Service	foodroute-order-service

Routing must use service name, not host/port.

6ï¸âƒ£ Gateway Routing Requirements
ğŸ”¹ Routing Pattern

Gateway must route requests based on path:

External Path	Internal Service
/orders/**	foodroute-order-service
ğŸ”¹ Path Handling Rule

Gateway must strip service-level prefixes if required

Backend service must receive clean paths

Example:

Client â†’ /orders
Gateway â†’ /orders
Order Service â†’ /orders

7ï¸âƒ£ API Contract (Client View)
ğŸ”¹ Create Order (Via Gateway)

Request

POST http://localhost:8080/orders

{
  "userId": "U123",
  "restaurantId": "R456",
  "items": [
    { "itemId": "I1", "quantity": 2 }
  ]
}


Response

{
  "orderId": "5e5adea3-156a-48c1-bca8-794e5cc02c99",
  "status": "CREATED",
  "totalAmount": 500.00
}

ğŸ”¹ Get Order (Via Gateway)

Request

GET http://localhost:8080/orders/{orderId}


Response

{
  "orderId": "5e5adea3-156a-48c1-bca8-794e5cc02c99",
  "status": "CREATED",
  "totalAmount": 500.00
}


ğŸ“Œ Response must be identical to Order Service response.

8ï¸âƒ£ Backend Service Expectations (Order Service)
Order Service must:

Remain unchanged for routing

Register with Eureka

Support dynamic port

Handle requests transparently

ğŸš« No gateway-specific logic inside Order Service.

9ï¸âƒ£ Configuration Requirements (Gateway)
Gateway must:

Use service discovery (Eureka) for routing

Not hardcode hostnames or ports

Support future extension (filters, security)

ğŸ” Service Discovery Requirement

Order Service must appear in Eureka as:

FOODROUTE-ORDER-SERVICE


Gateway must resolve instances dynamically

Load balancing must work if multiple instances exist

10ï¸âƒ£ Observability & Validation
Developer must validate:

Order Service reachable via Gateway

Gateway logs show route matching

Order Service logs show requests coming from Gateway

No 404 / 502 / routing errors

11ï¸âƒ£ Non-Functional Requirements

Gateway must remain stateless

No blocking code

No business logic in Gateway

Clean route definitions

Backward-compatible routing

12ï¸âƒ£ Definition of Done (DoD)

Day-3 is DONE when:

âœ” Client can create order via Gateway
âœ” Client can fetch order via Gateway
âœ” Order Service not accessed directly
âœ” Gateway routes using service name
âœ” Eureka resolution verified
âœ” No code changes in Order Service

ğŸ§  Architect Notes (Important for Dev)

Gateway is infrastructure, not business logic

Order Service should not know itâ€™s behind a Gateway

All future services (Payment, Delivery) will follow same routing pattern